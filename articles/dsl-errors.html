<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>DSL parse errors • monty</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="DSL parse errors">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">monty</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.4.5</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/monty.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Basics</h6></li>
    <li><a class="dropdown-item" href="../articles/dsl.html">Probabilistic DSL</a></li>
    <li><a class="dropdown-item" href="../articles/samples.html">Working with samples</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Details</h6></li>
    <li><a class="dropdown-item" href="../articles/dsl-errors.html">DSL parse errors</a></li>
    <li><a class="dropdown-item" href="../articles/samplers.html">Samplers</a></li>
    <li><a class="dropdown-item" href="../articles/migration.html">Migration from mcstate</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Extending</h6></li>
    <li><a class="dropdown-item" href="../articles/writing-samplers.html">Writing samplers</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/mrc-ide/monty/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>DSL parse errors</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/mrc-ide/monty/blob/main/vignettes/dsl-errors.Rmd" class="external-link"><code>vignettes/dsl-errors.Rmd</code></a></small>
      <div class="d-none name"><code>dsl-errors.Rmd</code></div>
    </div>

    
    
<!-- See comments at the top of odin's error vignette for details -->
<p>This vignette outlines errors that might be generated when parsing
monty DSL code, with more explanation about the error and how they can
be avoided. Don’t read this top to bottom as it’s quite boring! However,
if we get errors that benefit from more explanation about why they’ve
been thrown then we’ll expand on the contents here and arrange for these
to be linked from the thrown error directly.</p>
<p>The error numbers are arbitrary after the first digit. The first
digit will correspond to different phases of the parsing:</p>
<ul>
<li>
<code>E1xx</code> - errors during parsing of individual
expressions</li>
<li>
<code>E2xx</code> - errors when considering the system as a
whole</li>
</ul>
<div class="section level2">
<h2 id="e101">
<code>E101</code><a class="anchor" aria-label="anchor" href="#e101"></a>
</h2>
<p>We found an expression that is neither an assignment (with
<code>&lt;-</code>) or a stochastic relationship (with
<code>~</code>)</p>
<p>Example:</p>
<pre><code><span><span class="va">a</span> <span class="op">+</span> <span class="fl">1</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="e102">
<code>E102</code><a class="anchor" aria-label="anchor" href="#e102"></a>
</h2>
<p>Invalid left hand side of a relationship operator (<code>~</code>).
Currently the left hand side must be symbol, though this will be relaxed
in the future once we support an array syntax. However, you may not use
things like numbers or function calls on the left hand side.</p>
<p>Example:</p>
<pre><code><span><span class="fl">1</span> <span class="op">&lt;-</span> <span class="fl">2</span></span>
<span><span class="fu">f</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu">g</span><span class="op">(</span><span class="va">y</span><span class="op">)</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="e103">
<code>E103</code><a class="anchor" aria-label="anchor" href="#e103"></a>
</h2>
<p>Your distribution call failed to parse. This can fail for many
reasons, and the details of the failure come from
<code><a href="../reference/monty_dsl_parse_distribution.html">monty::monty_dsl_parse_distribution</a></code></p>
<p>Example reasons for failure include the rhs being:</p>
<ul>
<li>not a call (e.g., <code>compare(x) ~ 1</code>
</li>
<li>not a call to distribution function (e.g.,
<code>compare(x) ~ sqrt(2)</code>)</li>
<li>an invalid call (e.g.,
<code>compare(x) ~ Normal(0, 1, 2)</code>)</li>
</ul>
<p>The details for the failure will be included in the body of the error
message.</p>
</div>
<div class="section level2">
<h2 id="e104">
<code>E104</code><a class="anchor" aria-label="anchor" href="#e104"></a>
</h2>
<p>Invalid left hand side of an assignment with <code>&lt;-</code>; this
is similar to <code>E102</code>.</p>
</div>
<div class="section level2">
<h2 id="e201">
<code>E201</code><a class="anchor" aria-label="anchor" href="#e201"></a>
</h2>
<p>Duplicated relationships (with <code>~</code>).</p>
<p>Example:</p>
<pre><code><span><span class="va">a</span> <span class="op">~</span> <span class="fu">Normal</span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">b</span> <span class="op">~</span> <span class="fu">Uniform</span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">a</span> <span class="op">~</span> <span class="fu">Exponential</span><span class="op">(</span><span class="fl">1</span><span class="op">)</span> <span class="co"># &lt;= error here</span></span></code></pre>
<p>Relationships must be unique because each represents a parameter, and
a parameter can’t be represented by two different distributions.</p>
</div>
<div class="section level2">
<h2 id="e202">
<code>E202</code><a class="anchor" aria-label="anchor" href="#e202"></a>
</h2>
<p>Duplicated assignments (with <code>&lt;-</code>). This is similar to
<code>E201</code></p>
<p>Example:</p>
<pre><code><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fl">2</span></span>
<span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fl">3</span> <span class="co"># &lt;= error here</span></span></code></pre>
<p>Assignments must be unique within the DSL code because this makes it
straightforward to trace usage through the dependency graph and from
this create a gradient function using automatic differentiation.</p>
<p>This restriction means that you cannot reassign a value either, so
this is an error:</p>
<pre><code><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fl">10</span></span>
<span><span class="va">a</span> <span class="op">&lt;-</span> <span class="va">a</span> <span class="op">+</span> <span class="va">b</span> <span class="co"># &lt;= error here</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="e203">
<code>E203</code><a class="anchor" aria-label="anchor" href="#e203"></a>
</h2>
<p>A relationship (with <code>~</code>) is shadowing a previous
assignment. So after assigning to a variable you have declared that the
same symbol refers to a parameter.</p>
<p>Example:</p>
<pre><code><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span><span class="va">a</span> <span class="op">~</span> <span class="fu">Normal</span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span> <span class="co"># &lt;= error here</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="e204">
<code>E204</code><a class="anchor" aria-label="anchor" href="#e204"></a>
</h2>
<p>An assignment (with <code>&lt;-</code>) is shadowing a previous
relationship.</p>
<p>Example:</p>
<pre><code><span><span class="va">a</span> <span class="op">~</span> <span class="fu">Normal</span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fl">10</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="e205">
<code>E205</code><a class="anchor" aria-label="anchor" href="#e205"></a>
</h2>
<p>Variables are used out of order. If you are using odin this is a big
departure - at the moment you must declare your expressions (assignments
and relationships) in order. However, because we forbid multiple
assignment we may relax this in the future, but no existing programs
should be changed.</p>
</div>
<div class="section level2">
<h2 id="e206">
<code>E206</code><a class="anchor" aria-label="anchor" href="#e206"></a>
</h2>
<p>Failed to differentiate the model. This error will only be seen where
it was not possible to differentiate your model but you requested that a
gradient be available. Not all functions supported in the DSL can
currently be differentiated by monty; if you think that yours should be,
please let us know.</p>
</div>
<div class="section level2">
<h2 id="e207">
<code>E207</code><a class="anchor" aria-label="anchor" href="#e207"></a>
</h2>
<p>A value in <code>fixed</code> is shadowed by an assignment or a
relationship. If you pass in fixed data it may not be used on the left
hand side of any expression in your DSL code.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Rich FitzJohn, Wes Hinsley, Ed Knock, Marc Baguelin.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
