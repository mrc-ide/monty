<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Mcstate Random Number Generator — mcstate_rng • mcstate2</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Mcstate Random Number Generator — mcstate_rng"><meta name="description" content="Create an object that can be used to generate random
numbers with the same RNG as mcstate uses internally.  This is
primarily meant for debugging and testing the underlying C++
rather than a source of random numbers from R."><meta property="og:description" content="Create an object that can be used to generate random
numbers with the same RNG as mcstate uses internally.  This is
primarily meant for debugging and testing the underlying C++
rather than a source of random numbers from R."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">mcstate2</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.9</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/mcstate2.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/dsl-errors.html">DSL parse errors</a></li>
    <li><a class="dropdown-item" href="../articles/dsl.html">Probabilistic DSL</a></li>
    <li><a class="dropdown-item" href="../articles/samplers.html">Samplers</a></li>
    <li><a class="dropdown-item" href="../articles/samples.html">Working with samples</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/mrc-ide/mcstate2/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Mcstate Random Number Generator</h1>
      <small class="dont-index">Source: <a href="https://github.com/mrc-ide/mcstate2/blob/main/R/rng.R" class="external-link"><code>R/rng.R</code></a></small>
      <div class="d-none name"><code>mcstate_rng.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Create an object that can be used to generate random
numbers with the same RNG as mcstate uses internally.  This is
primarily meant for debugging and testing the underlying C++
rather than a source of random numbers from R.</p>
    </div>


    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code>mcstate_rng</code> object, which can be used to drawn random
numbers from mcstate's distributions.</p>
    </div>
    <div class="section level2">
    <h2 id="running-multiple-streams-perhaps-in-parallel">Running multiple streams, perhaps in parallel<a class="anchor" aria-label="anchor" href="#running-multiple-streams-perhaps-in-parallel"></a></h2>



<p>The underlying random number generators are designed to work in
parallel, and with random access to parameters (see
<code>vignette("rng")</code> for more details).  However, this is usually
done within the context of running a model where each particle
sees its own stream of numbers.  We provide some support for
running random number generators in parallel, but any speed
gains from parallelisation are likely to be somewhat eroded by
the overhead of copying around a large number of random numbers.</p>
<p>All the random distribution functions support an argument
<code>n_threads</code> which controls the number of threads used.  This
argument will <em>silently</em> have no effect if your installation
does not support OpenMP.</p>
<p>Parallelisation will be performed at the level of the stream,
where we draw <code>n</code> numbers from <em>each</em> stream for a total of <code>n * n_streams</code> random numbers using <code>n_threads</code> threads to do this.
Setting <code>n_threads</code> to be higher than <code>n_streams</code> will therefore
have no effect. If running on somebody else's system (e.g., an
HPC, CRAN) you must respect the various environment variables
that control the maximum allowable number of threads.</p>
<p>With the exception of <code>random_real</code>, each random number
distribution accepts parameters; the interpretations of these
will depend on <code>n</code>, <code>n_streams</code> and their rank.</p><ul><li><p>If a scalar then we will use the same parameter value for every draw
from every stream</p></li>
<li><p>If a vector with length <code>n</code> then we will draw <code>n</code> random
numbers per stream, and every stream will use the same parameter
value for every stream for each draw (but a different,
shared, parameter value for subsequent draws).</p></li>
<li><p>If a matrix is provided with one row and <code>n_streams</code>
columns then we use different parameters for each stream, but
the same parameter for each draw.</p></li>
<li><p>If a matrix is provided with <code>n</code> rows and <code>n_streams</code>
columns then we use a parameter value <code>[i, j]</code> for the <code>i</code>th
draw on the <code>j</code>th stream.</p></li>
</ul><p>The rules are slightly different for the <code>prob</code> argument to
<code>multinomial</code> as for that <code>prob</code> is a vector of values. As such
we shift all dimensions by one:</p><ul><li><p>If a vector we use same <code>prob</code> every draw from every stream
and there are <code>length(prob)</code> possible outcomes.</p></li>
<li><p>If a matrix with <code>n</code> columns then vary over each draw (the
<code>i</code>th draw using vector <code>prob[, i]</code> but shared across all
streams. There are <code>nrow(prob)</code> possible outcomes.</p></li>
<li><p>If a 3d array is provided with 1 column and <code>n_streams</code>
"layers" (the third dimension) then we use then we use different
parameters for each stream, but the same parameter for each
draw.</p></li>
<li><p>If a 3d array is provided with <code>n</code> columns and <code>n_streams</code>
"layers" then we vary over both draws and streams so that with
use vector <code>prob[, i, j]</code> for the <code>i</code>th draw on the <code>j</code>th
stream.</p></li>
</ul><p>The output will not differ based on the number of threads used,
only on the number of streams.</p>
    </div>
    <div class="section level2">
    <h2 id="public-fields">Public fields<a class="anchor" aria-label="anchor" href="#public-fields"></a></h2>
    <p></p><div class="r6-fields"><dl><dt><code>info</code></dt>
<dd><p>Information about the generator (read-only)</p></dd>


</dl><p></p></div>
    </div>
    <div class="section level2">
    <h2 id="methods">Methods<a class="anchor" aria-label="anchor" href="#methods"></a></h2>

<div class="section">
<h3 id="public-methods">Public methods<a class="anchor" aria-label="anchor" href="#public-methods"></a></h3>

<ul><li><p><a href="#method-mcstate_rng-new"><code>mcstate_rng$new()</code></a></p></li>
<li><p><a href="#method-mcstate_rng-size"><code>mcstate_rng$size()</code></a></p></li>
<li><p><a href="#method-mcstate_rng-jump"><code>mcstate_rng$jump()</code></a></p></li>
<li><p><a href="#method-mcstate_rng-long_jump"><code>mcstate_rng$long_jump()</code></a></p></li>
<li><p><a href="#method-mcstate_rng-random_real"><code>mcstate_rng$random_real()</code></a></p></li>
<li><p><a href="#method-mcstate_rng-random_normal"><code>mcstate_rng$random_normal()</code></a></p></li>
<li><p><a href="#method-mcstate_rng-uniform"><code>mcstate_rng$uniform()</code></a></p></li>
<li><p><a href="#method-mcstate_rng-normal"><code>mcstate_rng$normal()</code></a></p></li>
<li><p><a href="#method-mcstate_rng-binomial"><code>mcstate_rng$binomial()</code></a></p></li>
<li><p><a href="#method-mcstate_rng-nbinomial"><code>mcstate_rng$nbinomial()</code></a></p></li>
<li><p><a href="#method-mcstate_rng-hypergeometric"><code>mcstate_rng$hypergeometric()</code></a></p></li>
<li><p><a href="#method-mcstate_rng-gamma_scale"><code>mcstate_rng$gamma_scale()</code></a></p></li>
<li><p><a href="#method-mcstate_rng-gamma_rate"><code>mcstate_rng$gamma_rate()</code></a></p></li>
<li><p><a href="#method-mcstate_rng-poisson"><code>mcstate_rng$poisson()</code></a></p></li>
<li><p><a href="#method-mcstate_rng-exponential_rate"><code>mcstate_rng$exponential_rate()</code></a></p></li>
<li><p><a href="#method-mcstate_rng-exponential_mean"><code>mcstate_rng$exponential_mean()</code></a></p></li>
<li><p><a href="#method-mcstate_rng-cauchy"><code>mcstate_rng$cauchy()</code></a></p></li>
<li><p><a href="#method-mcstate_rng-multinomial"><code>mcstate_rng$multinomial()</code></a></p></li>
<li><p><a href="#method-mcstate_rng-beta"><code>mcstate_rng$beta()</code></a></p></li>
<li><p><a href="#method-mcstate_rng-state"><code>mcstate_rng$state()</code></a></p></li>
</ul></div><p></p><hr><a id="method-mcstate_rng-new"></a><div class="section">
<h3 id="method-new-">Method <code>new()</code><a class="anchor" aria-label="anchor" href="#method-new-"></a></h3>
<p>Create a <code>mcstate_rng</code> object</p><div class="section">
<h4 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va"><a href="../reference/mcstate_rng.html">mcstate_rng</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span>
<span>  seed <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  n_streams <span class="op">=</span> <span class="fl">1L</span>,</span>
<span>  real_type <span class="op">=</span> <span class="st">"double"</span>,</span>
<span>  deterministic <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h4>
<p></p><div class="arguments"><dl><dt><code>seed</code></dt>
<dd><p>The seed, as an integer, a raw vector or <code>NULL</code>.
If an integer we will create a suitable seed via the "splitmix64"
algorithm, if a raw vector it must the correct length (a multiple
of either 32 or 16 for <code>float = FALSE</code> or <code>float = TRUE</code>
respectively). If <code>NULL</code> then we create a seed using R's random
number generator.</p></dd>


<dt><code>n_streams</code></dt>
<dd><p>The number of streams to use (see Details)</p></dd>


<dt><code>real_type</code></dt>
<dd><p>The type of floating point number to use. Currently
only <code>float</code> and <code>double</code> are supported (with <code>double</code> being
the default). This will have no (or negligible) impact on speed,
but exists to test the low-precision generators.</p></dd>


<dt><code>deterministic</code></dt>
<dd><p>Logical, indicating if we should use
"deterministic" mode where distributions return their
expectations and the state is never changed.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-mcstate_rng-size"></a><div class="section">
<h3 id="method-size-">Method <code>size()</code><a class="anchor" aria-label="anchor" href="#method-size-"></a></h3>
<p>Number of streams available</p><div class="section">
<h4 id="usage-1">Usage<a class="anchor" aria-label="anchor" href="#usage-1"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">mcstate_rng</span><span class="op">$</span><span class="fu">size</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-mcstate_rng-jump"></a><div class="section">
<h3 id="method-jump-">Method <code>jump()</code><a class="anchor" aria-label="anchor" href="#method-jump-"></a></h3>
<p>The jump function updates the random number state for
each stream by advancing it to a state equivalent to
2^128 numbers drawn from each stream.</p><div class="section">
<h4 id="usage-2">Usage<a class="anchor" aria-label="anchor" href="#usage-2"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">mcstate_rng</span><span class="op">$</span><span class="fu">jump</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-mcstate_rng-long_jump"></a><div class="section">
<h3 id="method-long-jump-">Method <code>long_jump()</code><a class="anchor" aria-label="anchor" href="#method-long-jump-"></a></h3>
<p>Longer than <code>$jump</code>, the <code>$long_jump</code> method is
equivalent to 2^192 numbers drawn from each stream.</p><div class="section">
<h4 id="usage-3">Usage<a class="anchor" aria-label="anchor" href="#usage-3"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">mcstate_rng</span><span class="op">$</span><span class="fu">long_jump</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-mcstate_rng-random_real"></a><div class="section">
<h3 id="method-random-real-">Method <code>random_real()</code><a class="anchor" aria-label="anchor" href="#method-random-real-"></a></h3>
<p>Generate <code>n</code> numbers from a standard uniform distribution</p><div class="section">
<h4 id="usage-4">Usage<a class="anchor" aria-label="anchor" href="#usage-4"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">mcstate_rng</span><span class="op">$</span><span class="fu">random_real</span><span class="op">(</span><span class="va">n</span>, n_threads <span class="op">=</span> <span class="fl">1L</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-1">Arguments<a class="anchor" aria-label="anchor" href="#arguments-1"></a></h4>
<p></p><div class="arguments"><dl><dt><code>n</code></dt>
<dd><p>Number of samples to draw (per stream)</p></dd>


<dt><code>n_threads</code></dt>
<dd><p>Number of threads to use; see Details</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-mcstate_rng-random_normal"></a><div class="section">
<h3 id="method-random-normal-">Method <code>random_normal()</code><a class="anchor" aria-label="anchor" href="#method-random-normal-"></a></h3>
<p>Generate <code>n</code> numbers from a standard normal distribution</p><div class="section">
<h4 id="usage-5">Usage<a class="anchor" aria-label="anchor" href="#usage-5"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">mcstate_rng</span><span class="op">$</span><span class="fu">random_normal</span><span class="op">(</span><span class="va">n</span>, n_threads <span class="op">=</span> <span class="fl">1L</span>, algorithm <span class="op">=</span> <span class="st">"box_muller"</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-2">Arguments<a class="anchor" aria-label="anchor" href="#arguments-2"></a></h4>
<p></p><div class="arguments"><dl><dt><code>n</code></dt>
<dd><p>Number of samples to draw (per stream)</p></dd>


<dt><code>n_threads</code></dt>
<dd><p>Number of threads to use; see Details</p></dd>


<dt><code>algorithm</code></dt>
<dd><p>Name of the algorithm to use; currently <code>box_muller</code>
and <code>ziggurat</code> are supported, with the latter being considerably
faster.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-mcstate_rng-uniform"></a><div class="section">
<h3 id="method-uniform-">Method <code>uniform()</code><a class="anchor" aria-label="anchor" href="#method-uniform-"></a></h3>
<p>Generate <code>n</code> numbers from a uniform distribution</p><div class="section">
<h4 id="usage-6">Usage<a class="anchor" aria-label="anchor" href="#usage-6"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">mcstate_rng</span><span class="op">$</span><span class="fu">uniform</span><span class="op">(</span><span class="va">n</span>, <span class="va">min</span>, <span class="va">max</span>, n_threads <span class="op">=</span> <span class="fl">1L</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-3">Arguments<a class="anchor" aria-label="anchor" href="#arguments-3"></a></h4>
<p></p><div class="arguments"><dl><dt><code>n</code></dt>
<dd><p>Number of samples to draw (per stream)</p></dd>


<dt><code>min</code></dt>
<dd><p>The minimum of the distribution (length 1 or n)</p></dd>


<dt><code>max</code></dt>
<dd><p>The maximum of the distribution (length 1 or n)</p></dd>


<dt><code>n_threads</code></dt>
<dd><p>Number of threads to use; see Details</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-mcstate_rng-normal"></a><div class="section">
<h3 id="method-normal-">Method <code>normal()</code><a class="anchor" aria-label="anchor" href="#method-normal-"></a></h3>
<p>Generate <code>n</code> numbers from a normal distribution</p><div class="section">
<h4 id="usage-7">Usage<a class="anchor" aria-label="anchor" href="#usage-7"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">mcstate_rng</span><span class="op">$</span><span class="fu">normal</span><span class="op">(</span><span class="va">n</span>, <span class="va">mean</span>, <span class="va">sd</span>, n_threads <span class="op">=</span> <span class="fl">1L</span>, algorithm <span class="op">=</span> <span class="st">"box_muller"</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-4">Arguments<a class="anchor" aria-label="anchor" href="#arguments-4"></a></h4>
<p></p><div class="arguments"><dl><dt><code>n</code></dt>
<dd><p>Number of samples to draw (per stream)</p></dd>


<dt><code>mean</code></dt>
<dd><p>The mean of the distribution (length 1 or n)</p></dd>


<dt><code>sd</code></dt>
<dd><p>The standard deviation of the distribution (length 1 or n)</p></dd>


<dt><code>n_threads</code></dt>
<dd><p>Number of threads to use; see Details</p></dd>


<dt><code>algorithm</code></dt>
<dd><p>Name of the algorithm to use; currently <code>box_muller</code>
and <code>ziggurat</code> are supported, with the latter being considerably
faster.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-mcstate_rng-binomial"></a><div class="section">
<h3 id="method-binomial-">Method <code><a href="https://rdrr.io/r/stats/family.html" class="external-link">binomial()</a></code><a class="anchor" aria-label="anchor" href="#method-binomial-"></a></h3>
<p>Generate <code>n</code> numbers from a binomial distribution</p><div class="section">
<h4 id="usage-8">Usage<a class="anchor" aria-label="anchor" href="#usage-8"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">mcstate_rng</span><span class="op">$</span><span class="fu">binomial</span><span class="op">(</span><span class="va">n</span>, <span class="va">size</span>, <span class="va">prob</span>, n_threads <span class="op">=</span> <span class="fl">1L</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-5">Arguments<a class="anchor" aria-label="anchor" href="#arguments-5"></a></h4>
<p></p><div class="arguments"><dl><dt><code>n</code></dt>
<dd><p>Number of samples to draw (per stream)</p></dd>


<dt><code>size</code></dt>
<dd><p>The number of trials (zero or more, length 1 or n)</p></dd>


<dt><code>prob</code></dt>
<dd><p>The probability of success on each trial
(between 0 and 1, length 1 or n)</p></dd>


<dt><code>n_threads</code></dt>
<dd><p>Number of threads to use; see Details</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-mcstate_rng-nbinomial"></a><div class="section">
<h3 id="method-nbinomial-">Method <code>nbinomial()</code><a class="anchor" aria-label="anchor" href="#method-nbinomial-"></a></h3>
<p>Generate <code>n</code> numbers from a negative binomial distribution</p><div class="section">
<h4 id="usage-9">Usage<a class="anchor" aria-label="anchor" href="#usage-9"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">mcstate_rng</span><span class="op">$</span><span class="fu">nbinomial</span><span class="op">(</span><span class="va">n</span>, <span class="va">size</span>, <span class="va">prob</span>, n_threads <span class="op">=</span> <span class="fl">1L</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-6">Arguments<a class="anchor" aria-label="anchor" href="#arguments-6"></a></h4>
<p></p><div class="arguments"><dl><dt><code>n</code></dt>
<dd><p>Number of samples to draw (per stream)</p></dd>


<dt><code>size</code></dt>
<dd><p>The target number of successful trials
(zero or more, length 1 or n)</p></dd>


<dt><code>prob</code></dt>
<dd><p>The probability of success on each trial
(between 0 and 1, length 1 or n)</p></dd>


<dt><code>n_threads</code></dt>
<dd><p>Number of threads to use; see Details</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-mcstate_rng-hypergeometric"></a><div class="section">
<h3 id="method-hypergeometric-">Method <code>hypergeometric()</code><a class="anchor" aria-label="anchor" href="#method-hypergeometric-"></a></h3>
<p>Generate <code>n</code> numbers from a hypergeometric distribution</p><div class="section">
<h4 id="usage-10">Usage<a class="anchor" aria-label="anchor" href="#usage-10"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">mcstate_rng</span><span class="op">$</span><span class="fu">hypergeometric</span><span class="op">(</span><span class="va">n</span>, <span class="va">n1</span>, <span class="va">n2</span>, <span class="va">k</span>, n_threads <span class="op">=</span> <span class="fl">1L</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-7">Arguments<a class="anchor" aria-label="anchor" href="#arguments-7"></a></h4>
<p></p><div class="arguments"><dl><dt><code>n</code></dt>
<dd><p>Number of samples to draw (per stream)</p></dd>


<dt><code>n1</code></dt>
<dd><p>The number of white balls in the urn (called n in
R's <a href="https://rdrr.io/r/stats/Hypergeometric.html" class="external-link">rhyper</a>)</p></dd>


<dt><code>n2</code></dt>
<dd><p>The number of black balls in the urn (called m in
R's <a href="https://rdrr.io/r/stats/Hypergeometric.html" class="external-link">rhyper</a>)</p></dd>


<dt><code>k</code></dt>
<dd><p>The number of balls to draw</p></dd>


<dt><code>n_threads</code></dt>
<dd><p>Number of threads to use; see Details</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-mcstate_rng-gamma_scale"></a><div class="section">
<h3 id="method-gamma-scale-">Method <code>gamma_scale()</code><a class="anchor" aria-label="anchor" href="#method-gamma-scale-"></a></h3>
<p>Generate <code>n</code> numbers from a gamma distribution</p><div class="section">
<h4 id="usage-11">Usage<a class="anchor" aria-label="anchor" href="#usage-11"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">mcstate_rng</span><span class="op">$</span><span class="fu">gamma_scale</span><span class="op">(</span><span class="va">n</span>, <span class="va">shape</span>, <span class="va">scale</span>, n_threads <span class="op">=</span> <span class="fl">1L</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-8">Arguments<a class="anchor" aria-label="anchor" href="#arguments-8"></a></h4>
<p></p><div class="arguments"><dl><dt><code>n</code></dt>
<dd><p>Number of samples to draw (per stream)</p></dd>


<dt><code>shape</code></dt>
<dd><p>Shape</p></dd>


<dt><code>scale</code></dt>
<dd><p>Scale
'</p></dd>


<dt><code>n_threads</code></dt>
<dd><p>Number of threads to use; see Details</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-mcstate_rng-gamma_rate"></a><div class="section">
<h3 id="method-gamma-rate-">Method <code>gamma_rate()</code><a class="anchor" aria-label="anchor" href="#method-gamma-rate-"></a></h3>
<p>Generate <code>n</code> numbers from a gamma distribution</p><div class="section">
<h4 id="usage-12">Usage<a class="anchor" aria-label="anchor" href="#usage-12"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">mcstate_rng</span><span class="op">$</span><span class="fu">gamma_rate</span><span class="op">(</span><span class="va">n</span>, <span class="va">shape</span>, <span class="va">rate</span>, n_threads <span class="op">=</span> <span class="fl">1L</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-9">Arguments<a class="anchor" aria-label="anchor" href="#arguments-9"></a></h4>
<p></p><div class="arguments"><dl><dt><code>n</code></dt>
<dd><p>Number of samples to draw (per stream)</p></dd>


<dt><code>shape</code></dt>
<dd><p>Shape</p></dd>


<dt><code>rate</code></dt>
<dd><p>Rate
'</p></dd>


<dt><code>n_threads</code></dt>
<dd><p>Number of threads to use; see Details</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-mcstate_rng-poisson"></a><div class="section">
<h3 id="method-poisson-">Method <code><a href="https://rdrr.io/r/stats/family.html" class="external-link">poisson()</a></code><a class="anchor" aria-label="anchor" href="#method-poisson-"></a></h3>
<p>Generate <code>n</code> numbers from a Poisson distribution</p><div class="section">
<h4 id="usage-13">Usage<a class="anchor" aria-label="anchor" href="#usage-13"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">mcstate_rng</span><span class="op">$</span><span class="fu">poisson</span><span class="op">(</span><span class="va">n</span>, <span class="va">lambda</span>, n_threads <span class="op">=</span> <span class="fl">1L</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-10">Arguments<a class="anchor" aria-label="anchor" href="#arguments-10"></a></h4>
<p></p><div class="arguments"><dl><dt><code>n</code></dt>
<dd><p>Number of samples to draw (per stream)</p></dd>


<dt><code>lambda</code></dt>
<dd><p>The mean (zero or more, length 1 or n). Only valid for
lambda &lt;= 10^7</p></dd>


<dt><code>n_threads</code></dt>
<dd><p>Number of threads to use; see Details</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-mcstate_rng-exponential_rate"></a><div class="section">
<h3 id="method-exponential-rate-">Method <code>exponential_rate()</code><a class="anchor" aria-label="anchor" href="#method-exponential-rate-"></a></h3>
<p>Generate <code>n</code> numbers from a exponential distribution</p><div class="section">
<h4 id="usage-14">Usage<a class="anchor" aria-label="anchor" href="#usage-14"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">mcstate_rng</span><span class="op">$</span><span class="fu">exponential_rate</span><span class="op">(</span><span class="va">n</span>, <span class="va">rate</span>, n_threads <span class="op">=</span> <span class="fl">1L</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-11">Arguments<a class="anchor" aria-label="anchor" href="#arguments-11"></a></h4>
<p></p><div class="arguments"><dl><dt><code>n</code></dt>
<dd><p>Number of samples to draw (per stream)</p></dd>


<dt><code>rate</code></dt>
<dd><p>The rate of the exponential</p></dd>


<dt><code>n_threads</code></dt>
<dd><p>Number of threads to use; see Details</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-mcstate_rng-exponential_mean"></a><div class="section">
<h3 id="method-exponential-mean-">Method <code>exponential_mean()</code><a class="anchor" aria-label="anchor" href="#method-exponential-mean-"></a></h3>
<p>Generate <code>n</code> numbers from a exponential distribution</p><div class="section">
<h4 id="usage-15">Usage<a class="anchor" aria-label="anchor" href="#usage-15"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">mcstate_rng</span><span class="op">$</span><span class="fu">exponential_mean</span><span class="op">(</span><span class="va">n</span>, <span class="va">mean</span>, n_threads <span class="op">=</span> <span class="fl">1L</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-12">Arguments<a class="anchor" aria-label="anchor" href="#arguments-12"></a></h4>
<p></p><div class="arguments"><dl><dt><code>n</code></dt>
<dd><p>Number of samples to draw (per stream)</p></dd>


<dt><code>mean</code></dt>
<dd><p>The mean of the exponential</p></dd>


<dt><code>n_threads</code></dt>
<dd><p>Number of threads to use; see Details</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-mcstate_rng-cauchy"></a><div class="section">
<h3 id="method-cauchy-">Method <code>cauchy()</code><a class="anchor" aria-label="anchor" href="#method-cauchy-"></a></h3>
<p>Generate <code>n</code> draws from a Cauchy distribution.</p><div class="section">
<h4 id="usage-16">Usage<a class="anchor" aria-label="anchor" href="#usage-16"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">mcstate_rng</span><span class="op">$</span><span class="fu">cauchy</span><span class="op">(</span><span class="va">n</span>, <span class="va">location</span>, <span class="va">scale</span>, n_threads <span class="op">=</span> <span class="fl">1L</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-13">Arguments<a class="anchor" aria-label="anchor" href="#arguments-13"></a></h4>
<p></p><div class="arguments"><dl><dt><code>n</code></dt>
<dd><p>Number of samples to draw (per stream)</p></dd>


<dt><code>location</code></dt>
<dd><p>The location of the peak of the distribution
(also its median)</p></dd>


<dt><code>scale</code></dt>
<dd><p>A scale parameter, which specifies the distribution's
"half-width at half-maximum"</p></dd>


<dt><code>n_threads</code></dt>
<dd><p>Number of threads to use; see Details</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-mcstate_rng-multinomial"></a><div class="section">
<h3 id="method-multinomial-">Method <code>multinomial()</code><a class="anchor" aria-label="anchor" href="#method-multinomial-"></a></h3>
<p>Generate <code>n</code> draws from a multinomial distribution.
In contrast with most of the distributions here, each draw is a
<em>vector</em> with the same length as <code>prob</code>.</p><div class="section">
<h4 id="usage-17">Usage<a class="anchor" aria-label="anchor" href="#usage-17"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">mcstate_rng</span><span class="op">$</span><span class="fu">multinomial</span><span class="op">(</span><span class="va">n</span>, <span class="va">size</span>, <span class="va">prob</span>, n_threads <span class="op">=</span> <span class="fl">1L</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-14">Arguments<a class="anchor" aria-label="anchor" href="#arguments-14"></a></h4>
<p></p><div class="arguments"><dl><dt><code>n</code></dt>
<dd><p>The number of samples to draw (per stream)</p></dd>


<dt><code>size</code></dt>
<dd><p>The number of trials (zero or more, length 1 or n)</p></dd>


<dt><code>prob</code></dt>
<dd><p>A vector of probabilities for the success of each
trial. This does not need to sum to 1 (though all elements
must be non-negative), in which case we interpret <code>prob</code> as
weights and normalise so that they equal 1 before sampling.</p></dd>


<dt><code>n_threads</code></dt>
<dd><p>Number of threads to use; see Details</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-mcstate_rng-beta"></a><div class="section">
<h3 id="method-beta-">Method <code><a href="https://rdrr.io/r/base/Special.html" class="external-link">beta()</a></code><a class="anchor" aria-label="anchor" href="#method-beta-"></a></h3>
<p>Generate <code>n</code> numbers from a beta distribution</p><div class="section">
<h4 id="usage-18">Usage<a class="anchor" aria-label="anchor" href="#usage-18"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">mcstate_rng</span><span class="op">$</span><span class="fu">beta</span><span class="op">(</span><span class="va">n</span>, <span class="va">a</span>, <span class="va">b</span>, n_threads <span class="op">=</span> <span class="fl">1L</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-15">Arguments<a class="anchor" aria-label="anchor" href="#arguments-15"></a></h4>
<p></p><div class="arguments"><dl><dt><code>n</code></dt>
<dd><p>Number of samples to draw (per stream)</p></dd>


<dt><code>a</code></dt>
<dd><p>The first shape parameter</p></dd>


<dt><code>b</code></dt>
<dd><p>The second shape parameter</p></dd>


<dt><code>n_threads</code></dt>
<dd><p>Number of threads to use; see Details</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-mcstate_rng-state"></a><div class="section">
<h3 id="method-state-">Method <code>state()</code><a class="anchor" aria-label="anchor" href="#method-state-"></a></h3>
<p>Returns the state of the random number stream. This returns a
raw vector of length 32 * n_streams. It is primarily intended for
debugging as one cannot (yet) initialise a mcstate_rng object with this
state.</p><div class="section">
<h4 id="usage-19">Usage<a class="anchor" aria-label="anchor" href="#usage-19"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">mcstate_rng</span><span class="op">$</span><span class="fu">state</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>


</div>

    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">rng</span> <span class="op">&lt;-</span> <span class="fu">mcstate2</span><span class="fu">::</span><span class="va">mcstate_rng</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="fl">42</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Shorthand for Uniform(0, 1)</span></span></span>
<span class="r-in"><span><span class="va">rng</span><span class="op">$</span><span class="fu">random_real</span><span class="op">(</span><span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.4969537 0.6896184 0.3669609 0.3620384 0.9299854</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Shorthand for Normal(0, 1)</span></span></span>
<span class="r-in"><span><span class="va">rng</span><span class="op">$</span><span class="fu">random_normal</span><span class="op">(</span><span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] -1.53271190 -1.41913805  0.02345789 -0.73297710 -1.23072552</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Uniform random numbers between min and max</span></span></span>
<span class="r-in"><span><span class="va">rng</span><span class="op">$</span><span class="fu">uniform</span><span class="op">(</span><span class="fl">5</span>, <span class="op">-</span><span class="fl">2</span>, <span class="fl">6</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] -0.07182473  4.28030151 -1.86883075  1.79198057  2.40249777</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Normally distributed random numbers with mean and sd</span></span></span>
<span class="r-in"><span><span class="va">rng</span><span class="op">$</span><span class="fu">normal</span><span class="op">(</span><span class="fl">5</span>, <span class="fl">4</span>, <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 5.100104 3.489436 4.315190 2.868816 4.235165</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Binomially distributed random numbers with size and prob</span></span></span>
<span class="r-in"><span><span class="va">rng</span><span class="op">$</span><span class="fu">binomial</span><span class="op">(</span><span class="fl">5</span>, <span class="fl">10</span>, <span class="fl">0.3</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 5 3 2 5 2</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Negative binomially distributed random numbers with size and prob</span></span></span>
<span class="r-in"><span><span class="va">rng</span><span class="op">$</span><span class="fu">nbinomial</span><span class="op">(</span><span class="fl">5</span>, <span class="fl">10</span>, <span class="fl">0.3</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 18 12 10 28 41</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Hypergeometric distributed random numbers with parameters n1, n2 and k</span></span></span>
<span class="r-in"><span><span class="va">rng</span><span class="op">$</span><span class="fu">hypergeometric</span><span class="op">(</span><span class="fl">5</span>, <span class="fl">6</span>, <span class="fl">10</span>, <span class="fl">4</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 2 2 2 0 2</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Gamma distributed random numbers with parameters shape and scale</span></span></span>
<span class="r-in"><span><span class="va">rng</span><span class="op">$</span><span class="fu">gamma_scale</span><span class="op">(</span><span class="fl">5</span>, <span class="fl">0.5</span>, <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.1440913 0.5461841 0.8933152 2.0532643 0.2496346</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Gamma distributed random numbers with parameters shape and rate</span></span></span>
<span class="r-in"><span><span class="va">rng</span><span class="op">$</span><span class="fu">gamma_rate</span><span class="op">(</span><span class="fl">5</span>, <span class="fl">0.5</span>, <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.12141465 0.59654964 0.14313993 0.06523159 0.15478545</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Poisson distributed random numbers with mean lambda</span></span></span>
<span class="r-in"><span><span class="va">rng</span><span class="op">$</span><span class="fu">poisson</span><span class="op">(</span><span class="fl">5</span>, <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 2 2 2 1 1</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Exponentially distributed random numbers with rate</span></span></span>
<span class="r-in"><span><span class="va">rng</span><span class="op">$</span><span class="fu">exponential_rate</span><span class="op">(</span><span class="fl">5</span>, <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.4685057 0.2640733 1.6351242 0.1431109 0.9097181</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Exponentially distributed random numbers with mean</span></span></span>
<span class="r-in"><span><span class="va">rng</span><span class="op">$</span><span class="fu">exponential_mean</span><span class="op">(</span><span class="fl">5</span>, <span class="fl">0.5</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.94255189 0.00123903 0.12241847 1.13068419 1.28631799</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Multinomial distributed random numbers with size and vector of</span></span></span>
<span class="r-in"><span><span class="co"># probabiltiies prob</span></span></span>
<span class="r-in"><span><span class="va">rng</span><span class="op">$</span><span class="fu">multinomial</span><span class="op">(</span><span class="fl">5</span>, <span class="fl">10</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.3</span>, <span class="fl">0.5</span>, <span class="fl">0.1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      [,1] [,2] [,3] [,4] [,5]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]    0    0    0    1    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,]    3    3    2    4    3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,]    5    5    7    4    4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4,]    2    2    1    1    1</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Rich FitzJohn.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

